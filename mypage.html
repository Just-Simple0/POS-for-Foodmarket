<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>POS System - My Page</title>

    <link rel="stylesheet" href="css/common.css" />
    <link rel="stylesheet" href="css/mypage.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      as="style"
      crossorigin
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard-dynamic-subset.min.css"
    />

    <!-- Firebase -->
    <script type="module" src="js/components/firebase-config.js"></script>
    <!-- Page JS -->
    <script type="module" src="js/mypage.js" defer></script>
  </head>
  <body>
    <div class="wrapper">
      <div id="header-container"></div>

      <main class="mypage-container">
        <!-- 프로필 카드 -->
        <section class="user-card">
          <h2>👨‍💼 직원 정보</h2>

          <p><strong>이름:</strong> <span id="user-name">-</span></p>
          <p><strong>이메일:</strong> <span id="user-email">-</span></p>
          <p>
            <strong>최근 로그인:</strong> <span id="user-last-login">-</span>
          </p>

          <!-- 권한 & 관리자 뱃지 (role === 'admin'일 때만 표시) -->
          <p>
            <strong>권한:</strong> <span id="user-role">-</span>
            <span
              id="admin-badge"
              class="admin-badge"
              style="display: none; margin-left: 0.5rem"
            >
              <i class="fas fa-crown"></i> 관리자
            </span>
          </p>

          <button id="logout-btn">로그아웃</button>
        </section>

        <!-- 🔗 계정 연동 (기존 섹션 유지) -->
        <section class="federation-card">
          <h2>🔗 계정 연동</h2>
          <p class="fed-help">
            이메일 계정을 기본으로 사용하고, 소셜 계정은 로그인용으로
            <strong>연동</strong>할 수 있어요.
          </p>

          <div class="link-list">
            <!-- Google -->
            <article class="link-item" data-provider="google">
              <div class="provider">
                <i class="fa-brands fa-google"></i>
                <div>
                  <h3>Google</h3>
                  <div class="status">
                    <span id="status-google" class="status-badge"
                      >확인 중…</span
                    >
                  </div>
                </div>
              </div>
              <div class="actions">
                <button id="link-google" class="btn primary" type="button">
                  연동하기
                </button>
                <button
                  id="unlink-google"
                  class="btn danger hidden"
                  type="button"
                >
                  연동 해지
                </button>
              </div>
            </article>

            <!-- Kakao -->
            <article class="link-item" data-provider="kakao">
              <div class="provider">
                <i class="fa-solid fa-comment"></i>
                <div>
                  <h3>Kakao</h3>
                  <div class="status">
                    <span id="status-kakao" class="status-badge">확인 중…</span>
                  </div>
                </div>
              </div>
              <div class="actions">
                <button id="link-kakao" class="btn primary" type="button">
                  연동하기
                </button>
                <button
                  id="unlink-kakao"
                  class="btn danger hidden"
                  type="button"
                >
                  연동 해지
                </button>
              </div>
            </article>

            <!-- Naver -->
            <article class="link-item" data-provider="naver">
              <div class="provider">
                <i class="fa-solid fa-n"></i>
                <div>
                  <h3>Naver</h3>
                  <div class="status">
                    <span id="status-naver" class="status-badge">확인 중…</span>
                  </div>
                </div>
              </div>
              <div class="actions">
                <button id="link-naver" class="btn primary" type="button">
                  연동하기
                </button>
                <button
                  id="unlink-naver"
                  class="btn danger hidden"
                  type="button"
                >
                  연동 해지
                </button>
              </div>
            </article>
          </div>

          <p class="note">
            ※ 연동 후에는 해당 소셜 버튼으로도 로그인할 수 있습니다. 연동을
            해지하면 로그인에 사용할 수 없습니다.
          </p>
        </section>
      </main>

      <div id="footer-container"></div>
    </div>

    <!-- header/footer 삽입 & toast 컨테이너 보장 -->
    <script type="module">
      import {
        loadHeader,
        loadFooter,
        showToast,
      } from "./js/components/comp.js";
      loadHeader("header-container");
      loadFooter("footer-container");
      if (!document.getElementById("toast")) {
        const el = document.createElement("div");
        el.id = "toast";
        document.body.appendChild(el);
      }
    </script>
  </body>
</html>
