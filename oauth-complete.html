<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <title>로그인 처리중…</title>
    <script type="module">
      import { auth } from "./js/components/firebase-config.js";
      import { signInWithCustomToken } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

      (async () => {
        const token = new URLSearchParams(location.hash.slice(1)).get("token");
        if (!token) {
          alert("로그인 토큰이 없습니다.");
          location.replace("index.html");
          return;
        }
        try {
          await signInWithCustomToken(auth, token);
          location.replace("dashboard.html");
        } catch (e) {
          console.error(e);
          alert("로그인 처리 중 오류가 발생했습니다.");
          location.replace("index.html");
        }
      })();
    </script>
  </head>
  <body>
    <p>로그인 처리중…</p>
  </body>
</html>
