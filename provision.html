<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ì œê³µë“±ë¡</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- ê³µí†µ parts ì‚½ì… -->
    <link rel="stylesheet" href="css/common.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link
      rel="stylesheet"
      as="style"
      crossorigin
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard-dynamic-subset.min.css"
    />

    <!-- SheetUS ì‚½ì… -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <!-- Firebase parts ì‚½ì… -->
    <script type="module" src="js/components/firebase-config.js"></script>

    <!-- ê°œë³„ css, js ì‚½ì… -->
    <link rel="stylesheet" href="css/provision.css" />
    <script type="module" src="js/provision.js" defer></script>
  </head>

  <body>
    <div class="wrapper">
      <div id="header-container"></div>

      <main class="container">
        <h3>ì´ìš©ì ì¡°íšŒ</h3>
        <!-- âœ… ì‚¬ìš©ì í™•ì¸ ì˜ì—­ -->
        <section id="customer-lookup">
          <label for="customer-id">ì´ìš©ì ID ë˜ëŠ” ì´ë¦„</label>
          <input
            type="text"
            id="customer-id"
            placeholder="ì˜ˆ: 10001 ë˜ëŠ” í™ê¸¸ë™"
          />
          <button id="lookup-btn"><i class="fas fa-search"></i> ì¡°íšŒ</button>

          <div id="customer-info" class="hidden">
            <!-- ì¡°íšŒëœ ê³ ê° ì •ë³´ -->
          </div>
        </section>

        <!-- âœ… ìƒí’ˆ ì„ íƒ ì˜ì—­ -->
        <section id="product-selection" class="hidden">
          <h3>ìƒí’ˆ ì¶”ê°€</h3>

          <div class="product-input-area">
            <div class="autocomplete-wrapper">
              <input
                type="text"
                id="barcode-input"
                placeholder="ë°”ì½”ë“œ ë˜ëŠ” ìƒí’ˆëª… ì…ë ¥"
              />
              <div
                id="autocomplete-list"
                class="autocomplete-list hidden"
              ></div>
            </div>
            <input
              type="number"
              id="quantity-input"
              placeholder="ìˆ˜ëŸ‰ (ê¸°ë³¸ 1)"
              min="1"
              max="30"
            />
            <button id="add-product-btn">
              <i class="fas fa-plus-circle"></i> ì¶”ê°€
            </button>
          </div>

          <div class="selected-products">
            <table id="selected-table">
              <thead>
                <tr>
                  <th>ìƒí’ˆëª…</th>
                  <th>ìˆ˜ëŸ‰</th>
                  <th>ë‹¨ê°€</th>
                  <th>ì´ê°€ê²©</th>
                  <th>ê´€ë¦¬</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
            <div id="total-summary">
              ì´ í•©ê³„: <span id="total-points">0</span> í¬ì¸íŠ¸
              <span id="point-warning" class="hidden"
                >âš  í¬ì¸íŠ¸ ì´ˆê³¼ (ìµœëŒ€ 30)</span
              >
            </div>
          </div>
        </section>

        <!-- ğŸ” ê¸°ëŠ¥ ë²„íŠ¼ë“¤ (ìƒí’ˆ í…Œì´ë¸” í•˜ë‹¨) -->
        <div
          id="product-action-buttons"
          style="margin-top: 1rem; display: flex; gap: 10px"
        >
          <button id="undo-btn">
            <i class="fas fa-rotate-left"></i>
          </button>
          <button id="redo-btn">
            <i class="fas fa-rotate-right"></i>
          </button>
          <button id="clear-products-btn">
            <i class="fas fa-broom"></i> ë¬¼í’ˆ ì´ˆê¸°í™”
          </button>
          <button id="clear-all-btn">
            <i class="fas fa-trash-alt"></i> ì „ì²´ ì´ˆê¸°í™”
          </button>
        </div>

        <!-- âœ… ì œì¶œ ë²„íŠ¼ -->
        <section id="submit-section" class="hidden">
          <button id="submit-btn">
            <i class="fas fa-check-circle"></i> ì œê³µ ë“±ë¡ ì™„ë£Œ
          </button>
        </section>
      </main>

      <div id="footer-container"></div>
    </div>

    <!-- âœ… ë™ëª…ì´ì¸ ì„ íƒ ëª¨ë‹¬ -->
    <div id="duplicate-modal" class="modal hidden">
      <div class="modal-content">
        <h2>ì´ìš©ì ì„ íƒ</h2>
        <ul id="duplicate-list">
          <!-- ë™ì ìœ¼ë¡œ í›„ë³´ ë¦¬ìŠ¤íŠ¸ ì‚½ì… -->
        </ul>
        <div
          id="selected-info"
          class="hidden"
          style="margin-top: 1rem; font-size: 0.9rem"
        ></div>

        <div class="modal-buttons">
          <button id="confirm-duplicate">
            <i class="fas fa-check"></i> í™•ì¸
          </button>
          <button id="close-duplicate-modal">
            <i class="fas fa-times"></i> ë‹«ê¸°
          </button>
        </div>
      </div>
    </div>

    <!-- Header/Footer ì‚½ì… -->
    <script type="module">
      import { loadHeader, loadFooter } from "./js/components/comp.js";
      loadHeader("ì œê³µë“±ë¡", "header-container");
      loadFooter("footer-container");
    </script>
  </body>
</html>
