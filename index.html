<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>POS System - Login</title>
    <script>
      (function () {
        try {
          var t = localStorage.getItem("theme");
          var d = t
            ? t === "dark"
            : window.matchMedia &&
              window.matchMedia("(prefers-color-scheme: dark)").matches;
          if (d) document.documentElement.classList.add("dark");
        } catch (e) {}
      })();
    </script>
    <link rel="icon" href="data:," />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard-dynamic-subset.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <link rel="stylesheet" href="css/tw.css" />
    <link rel="stylesheet" href="css/tw-input.css" />
    <link rel="stylesheet" href="css/index.css" />

    <script
      src="https://challenges.cloudflare.com/turnstile/v0/api.js?hl=ko"
      async
      defer
    ></script>
  </head>
  <body class="flex items-center justify-center min-h-screen p-4">
    <main
      class="card w-full max-w-[420px] animate-fade-in shadow-floating border-none p-8"
    >
      <div class="text-center mb-8">
        <h1
          class="text-3xl font-extrabold text-slate-900 dark:text-white mb-2 tracking-tight"
        >
          POS 로그인
        </h1>
        <p class="text-slate-500 dark:text-slate-400 text-sm">
          서비스 이용을 위해 로그인해주세요
        </p>
      </div>

      <form id="email-form" class="space-y-5" autocomplete="on">
        <div class="field-group">
          <label class="field-label" for="email">이메일</label>
          <div class="field-box">
            <div class="field-prefix">
              <i class="fa-regular fa-envelope"></i>
            </div>
            <input
              id="email"
              type="email"
              placeholder="example@email.com"
              required
              autocomplete="email"
              class="field-input"
            />
          </div>
        </div>

        <div class="field-group">
          <label class="field-label" for="password">비밀번호</label>
          <div class="field-box">
            <div class="field-prefix"><i class="fa-solid fa-lock"></i></div>
            <input
              id="password"
              type="password"
              placeholder="비밀번호 입력"
              required
              autocomplete="current-password"
              class="field-input"
            />
            <div class="field-right">
              <button
                type="button"
                id="login-pw-toggle"
                class="btn btn-ghost field-btn-toggle"
                aria-label="비밀번호 표시"
              >
                <i class="fas fa-eye-slash text-lg"></i>
              </button>
            </div>
          </div>
          <div
            id="caps-hint-login"
            class="field-error-text text-warning hidden"
          >
            <i class="fa-solid fa-triangle-exclamation mr-1"></i>Caps Lock이
            켜져 있습니다
          </div>
        </div>

        <div class="flex items-center gap-2 py-1">
          <input id="remember-me" type="checkbox" class="input-toss" />
          <label
            for="remember-me"
            class="text-[14px] font-bold text-slate-600 dark:text-slate-400 cursor-pointer select-none"
            >로그인 유지</label
          >
        </div>

        <div class="turnstile-wrap min-h-[65px]">
          <div
            id="ts-login"
            class="cf-turnstile"
            data-sitekey="0x4AAAAAABtE3GFMWF3_Fd4E"
            data-appearance="always"
            data-callback="onTurnstileLogin"
            data-expired-callback="onTurnstileLoginExpired"
            data-error-callback="onTurnstileLoginError"
          ></div>
        </div>

        <button
          id="email-login-btn"
          class="btn btn-primary btn-lg btn-full shadow-lg shadow-blue-500/30"
          type="submit"
        >
          로그인
        </button>

        <div class="flex justify-between mt-4 px-1">
          <button
            id="email-signup-btn"
            type="button"
            class="btn btn-light-weak btn-sm text-slate-500 hover:text-slate-800"
          >
            계정 만들기
          </button>
          <button
            id="reset-password-btn"
            type="button"
            class="btn btn-light-weak btn-sm text-slate-500 hover:text-slate-800"
          >
            비밀번호 찾기
          </button>
        </div>
      </form>

      <div class="flex items-center gap-3 my-8">
        <div class="h-px bg-slate-200 dark:bg-slate-700 flex-1"></div>
        <span class="text-xs font-bold text-slate-400 uppercase tracking-wider"
          >Social Login</span
        >
        <div class="h-px bg-slate-200 dark:bg-slate-700 flex-1"></div>
      </div>

      <div class="flex flex-col gap-3">
        <button
          id="google-login-btn"
          class="btn btn-lg btn-full bg-white text-slate-700 border border-slate-200 hover:bg-slate-50 relative"
        >
          <i class="fa-brands fa-google text-lg absolute left-6"></i>
          <span>Google로 로그인</span>
        </button>
        <button
          id="kakao-login-btn"
          class="btn btn-lg btn-full bg-[#FEE500] text-[#191919] hover:bg-[#FDD835] border-none relative"
        >
          <i class="fa-solid fa-comment text-lg absolute left-6"></i>
          <span>Kakao로 로그인</span>
        </button>
      </div>

      <p
        id="login-error"
        class="text-center text-sm font-bold text-danger mt-6 min-h-[20px]"
      ></p>
    </main>

    <div id="signup-modal" class="modal-overlay hidden" aria-hidden="true">
      <div class="modal-content animate-fade-in">
        <div class="modal-header">
          <h2 class="modal-title">계정 만들기</h2>
          <button
            id="signup-close-icon"
            class="btn btn-ghost btn-sm !w-8 !h-8 rounded-full"
          >
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>

        <form
          id="signup-form"
          class="modal-body space-y-4"
          autocomplete="on"
          onsubmit="return false;"
        >
          <div class="field-group">
            <label class="field-label">이름</label>
            <div class="field-box">
              <input
                id="signup-name"
                type="text"
                placeholder="이름 입력"
                required
                class="field-input"
              />
            </div>
          </div>

          <div class="field-group">
            <label class="field-label">이메일</label>
            <div class="field-box">
              <input
                id="signup-email"
                type="email"
                placeholder="example@email.com"
                required
                class="field-input"
              />
            </div>
            <p id="signup-email-error" class="field-error-text hidden">
              올바른 이메일이 아닙니다.
            </p>
          </div>

          <div class="field-group">
            <label class="field-label">비밀번호</label>
            <div class="field-box">
              <input
                id="signup-password"
                type="password"
                placeholder="영문, 숫자 포함 8자 이상"
                required
                class="field-input"
              />
              <div class="field-right">
                <button
                  type="button"
                  id="signup-pw-toggle"
                  class="btn btn-ghost field-btn-toggle"
                >
                  <i class="fas fa-eye-slash text-lg"></i>
                </button>
              </div>
            </div>
            <div
              id="caps-hint-signup1"
              class="field-error-text text-warning hidden"
            >
              <i class="fa-solid fa-triangle-exclamation mr-1"></i>Caps Lock이
              켜져 있습니다
            </div>
            <p id="signup-pw-error" class="field-error-text hidden">
              영문, 숫자 포함 8자 이상이어야 합니다.
            </p>
            <div
              id="pw-strength"
              class="text-xs font-bold text-slate-400 ml-1 mt-1 hidden"
            >
              강도: -
            </div>
          </div>

          <div class="field-group">
            <label class="field-label">비밀번호 확인</label>
            <div class="field-box">
              <input
                id="signup-password2"
                type="password"
                placeholder="비밀번호 재입력"
                required
                class="field-input"
              />
              <div class="field-right">
                <button
                  type="button"
                  id="signup-pw2-toggle"
                  class="btn btn-ghost field-btn-toggle"
                >
                  <i class="fas fa-eye-slash text-lg"></i>
                </button>
              </div>
            </div>
            <div
              id="caps-hint-signup2"
              class="field-error-text text-warning hidden"
            >
              <i class="fa-solid fa-triangle-exclamation mr-1"></i>Caps Lock이
              켜져 있습니다
            </div>
            <p id="signup-pw2-error" class="field-error-text hidden">
              비밀번호가 일치하지 않습니다.
            </p>
          </div>

          <div class="flex items-center gap-2 py-2">
            <input id="signup-agree" type="checkbox" class="input-toss" />
            <label
              for="signup-agree"
              class="text-[13px] text-slate-600 dark:text-slate-400 leading-snug cursor-pointer select-none"
            >
              <span
                id="btn-show-terms"
                class="font-bold text-primary hover:underline"
                >이용 약관</span
              >
              및
              <span
                id="btn-show-privacy"
                class="font-bold text-primary hover:underline"
                >개인정보 처리방침</span
              >에 동의합니다.
            </label>
          </div>

          <div class="turnstile-wrap flex justify-center min-h-[65px] p-1">
            <div
              id="ts-signup"
              class="cf-turnstile"
              data-sitekey="0x4AAAAAABtE3GFMWF3_Fd4E"
              data-appearance="always"
            ></div>
          </div>

          <p
            id="signup-error"
            class="text-center text-sm font-bold text-danger min-h-[20px]"
          ></p>

          <div class="pt-2 flex gap-2">
            <button
              id="signup-cancel-btn"
              class="btn btn-light btn-lg flex-1"
              type="button"
            >
              취소
            </button>
            <button
              id="signup-submit-btn"
              class="btn btn-primary btn-lg flex-[2]"
              type="button"
            >
              계정 생성
            </button>
          </div>
        </form>

        <div
          class="blocking hidden absolute inset-0 bg-white/80 dark:bg-slate-900/80 z-50 flex-col items-center justify-center gap-3 backdrop-blur-sm"
        >
          <div class="tds-spinner"></div>
          <span
            class="text-sm font-bold text-slate-600 dark:text-slate-300 blocking-msg"
            >처리 중...</span
          >
        </div>
      </div>
    </div>

    <div id="reset-modal" class="modal-overlay hidden" aria-hidden="true">
      <div class="modal-content animate-fade-in">
        <div class="modal-header">
          <h2 class="modal-title">비밀번호 찾기</h2>
          <button
            id="reset-close-icon"
            class="btn btn-ghost btn-sm !w-8 !h-8 rounded-full"
          >
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>

        <form
          id="reset-form"
          class="modal-body space-y-5 !pt-0"
          onsubmit="return false;"
        >
          <p class="text-slate-500 text-sm">
            가입하신 이메일 주소를 입력하시면<br />비밀번호 재설정 링크를
            보내드립니다.
          </p>

          <div class="field-group">
            <label class="field-label">이메일</label>
            <div class="field-box">
              <input
                id="reset-email"
                type="email"
                placeholder="example@email.com"
                required
                class="field-input"
              />
            </div>
            <p id="reset-email-error" class="field-error-text hidden">
              올바른 이메일이 아닙니다.
            </p>
          </div>

          <div class="turnstile-wrap flex justify-center min-h-[65px] p-1">
            <div
              id="ts-reset"
              class="cf-turnstile"
              data-sitekey="0x4AAAAAABtE3GFMWF3_Fd4E"
              data-appearance="always"
            ></div>
          </div>

          <p
            id="reset-error"
            class="text-center text-sm font-bold text-danger min-h-[20px]"
          ></p>

          <div class="flex gap-2 pt-2">
            <button
              id="reset-cancel-btn"
              class="btn btn-light btn-lg flex-1"
              type="button"
            >
              취소
            </button>
            <button
              id="reset-submit-btn"
              class="btn btn-primary btn-lg flex-[2]"
              type="button"
            >
              메일 보내기
            </button>
          </div>
        </form>
      </div>
    </div>

    <div id="social-keep-modal" class="modal-overlay hidden" aria-hidden="true">
      <div class="modal-content animate-fade-in max-w-[360px]">
        <div class="p-8 pb-4 text-center">
          <div
            class="w-14 h-14 rounded-full bg-blue-50 dark:bg-blue-900/30 flex items-center justify-center mx-auto mb-4 text-primary"
          >
            <i class="fa-solid fa-clock-rotate-left text-2xl"></i>
          </div>
          <h2 class="text-[20px] font-bold text-slate-900 dark:text-white mb-2">
            로그인 상태를 유지할까요?
          </h2>
          <p
            class="text-[15px] text-slate-600 dark:text-slate-400 leading-relaxed word-keep"
          >
            '유지하기'를 선택하면 브라우저를 닫아도<br />로그인이 풀리지
            않습니다.<br />
            <span class="text-xs text-slate-400 mt-2 block"
              >(공용 PC에서는 '아니요'를 선택하세요)</span
            >
          </p>
        </div>

        <div class="p-6 pt-2 flex gap-3">
          <button id="social-keep-no" class="btn btn-lg btn-light flex-1">
            아니요
          </button>
          <button id="social-keep-yes" class="btn btn-lg btn-primary flex-1">
            유지하기
          </button>
        </div>
      </div>
    </div>

    <div id="terms-modal" class="modal-overlay hidden" aria-hidden="true">
      <div
        class="modal-content animate-fade-in max-w-[500px] flex flex-col max-h-[80vh]"
      >
        <div
          class="modal-header border-b border-slate-100 dark:border-slate-700/50"
        >
          <h2 class="modal-title">서비스 이용 약관</h2>
          <button
            id="terms-close-icon"
            class="btn btn-ghost btn-sm !w-8 !h-8 rounded-full"
          >
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <div
          class="modal-body overflow-y-auto custom-scrollbar p-6 space-y-4 text-sm leading-relaxed text-slate-600 dark:text-slate-300"
        >
          <h4 class="font-bold text-slate-900 dark:text-white">제1조 (목적)</h4>
          <p>
            본 약관은 푸드마켓 POS 시스템(이하 "서비스")이 제공하는 서비스의
            이용조건 및 절차, 이용자와 운영자의 권리, 의무 및 책임사항을
            규정함을 목적으로 합니다.
          </p>

          <h4 class="font-bold text-slate-900 dark:text-white">
            제2조 (용어의 정의)
          </h4>
          <p>
            1. "이용자"란 본 약관에 따라 서비스를 이용하는 회원을 말합니다.<br />2.
            "계정"이란 서비스 이용을 위해 이메일 주소와 비밀번호를 기반으로
            생성된 정보를 말합니다.
          </p>

          <h4 class="font-bold text-slate-900 dark:text-white">
            제3조 (서비스의 제공)
          </h4>
          <p>
            서비스는 재고 관리, 이용자 관리, 포인트 제공 및 교환 등의 기능을
            제공합니다. 운영자는 필요에 따라 서비스의 내용을 변경하거나 중단할
            수 있습니다.
          </p>

          <h4 class="font-bold text-slate-900 dark:text-white">
            제4조 (이용자의 의무)
          </h4>

          <p>
            1. 본 시스템은 업무 목적으로만 사용해야 하며, 시스템 내의 고객
            정보를 무단으로 유출하거나 사적으로 이용해서는 안 됩니다.<br />
            2. 이용자의 모든 접속 기록 및 데이터 조회 내역은 보안을 위해 로그로
            기록되며, 오남용 의심 시 관리자가 이를 확인할 수 있습니다.
          </p>
        </div>
        <div class="p-6 pt-2">
          <button id="terms-ok-btn" class="btn btn-primary btn-lg btn-full">
            확인
          </button>
        </div>
      </div>
    </div>

    <div id="privacy-modal" class="modal-overlay hidden" aria-hidden="true">
      <div
        class="modal-content animate-fade-in max-w-[500px] flex flex-col max-h-[80vh]"
      >
        <div
          class="modal-header border-b border-slate-100 dark:border-slate-700/50"
        >
          <h2 class="modal-title">개인정보 처리방침</h2>
          <button
            id="privacy-close-icon"
            class="btn btn-ghost btn-sm !w-8 !h-8 rounded-full"
          >
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <div
          class="modal-body overflow-y-auto custom-scrollbar p-6 space-y-4 text-sm leading-relaxed text-slate-600 dark:text-slate-300"
        >
          <h4 class="font-bold text-slate-900 dark:text-white">
            1. 수집하는 개인정보 항목
          </h4>
          <p>
            회사는 회원가입, 서비스 이용을 위해 아래와 같은 개인정보를
            수집합니다.<br />- 필수항목: 이메일 주소, 비밀번호, 이름<br />-
            자동수집: 접속 로그, 접속 IP 정보
          </p>

          <h4 class="font-bold text-slate-900 dark:text-white">
            2. 개인정보의 수집 및 이용 목적
          </h4>
          <p>
            수집한 개인정보는 다음의 목적을 위해 활용합니다.<br />- 서비스
            이용에 따른 본인 확인, 개인 식별, 불량 회원의 부정 이용 방지<br />-
            물품 제공 및 교환 이력 관리
          </p>

          <h4 class="font-bold text-slate-900 dark:text-white">
            3. 개인정보의 보유 및 이용 기간
          </h4>
          <p>
            원칙적으로 개인정보 수집 및 이용 목적이 달성된 후에는 해당 정보를
            지체 없이 파기합니다. 단, 관계 법령에 의해 보존할 필요가 있는 경우
            일정 기간 보관합니다.
          </p>
        </div>
        <div class="p-6 pt-2">
          <button id="privacy-ok-btn" class="btn btn-primary btn-lg btn-full">
            확인
          </button>
        </div>
      </div>
    </div>

    <div id="tds-toast-container" class="toast-container"></div>

    <script>
      window._tsTokens = { login: null, signup: null, reset: null };
      function onTurnstileLogin(t) {
        window._tsTokens.login = t;
      }
      function onTurnstileSignup(t) {
        window._tsTokens.signup = t;
      }
      function onTurnstileReset(t) {
        window._tsTokens.reset = t;
      }
      function onTurnstileLoginExpired() {
        window._tsTokens.login = null;
      }
      function onTurnstileSignupExpired() {
        window._tsTokens.signup = null;
      }
      function onTurnstileResetExpired() {
        window._tsTokens.reset = null;
      }
      function onTurnstileLoginError() {
        window._tsTokens.login = null;
      }
      function onTurnstileSignupError() {
        window._tsTokens.signup = null;
      }
      function onTurnstileResetError() {
        window._tsTokens.reset = null;
      }
    </script>

    <script type="module" src="js/components/comp.js"></script>
    <script type="module" src="js/login.js"></script>
  </body>
</html>
